CREATE TABLE CLIENTE (
    ClienteID integer,
    Nome varchar(80),
    Email varchar(80),
    Telefone varchar(15),
    CPF_CNPJ varchar(14),
    Usuario integer
);
 
ALTER TABLE CLIENTE ADD CONSTRAINT PK_CLIENTE PRIMARY KEY (ClienteID);

CREATE TABLE VEICULO (
    VeiculoID integer,
    Modelo varchar(20),
    Ano_de_Fabricacao char(4),
    Cor varchar(15),
    Placa varchar(10),
    Renavam char(11),
    Cliente integer,
    Marca integer
);
 
ALTER TABLE VEICULO ADD CONSTRAINT PK_VEICULO PRIMARY KEY (VeiculoID);

CREATE TABLE SERVICO (
    ServicoID integer,
    Descricao varchar(30),
    Preco NUMERIC(8,2)
);
 
ALTER TABLE SERVICO ADD CONSTRAINT PK_SERVICO PRIMARY KEY (ServicoID);

CREATE TABLE OS (
    OrdemID integer,
    DataAgenda DATE,
    Horario TIME,
    DataRealizada DATE,
    Total NUMERIC(18,2),
    Cliente integer,
    Veiculo integer,
    Usuario integer
);
 
ALTER TABLE OS ADD CONSTRAINT PK_OS PRIMARY KEY (OrdemID);

ALTER TABLE OS
ALTER COLUMN Total TYPE NUMERIC(18, 2);

CREATE TABLE RECEBIMENTO (
    RecebimentoID integer,
    Data DATE,
    Valor NUMERIC(18,2),
    Desconto NUMERIC(18,2),
    OS integer,
    FormaPgto integer,
    Usuario integer
);
 
ALTER TABLE RECEBIMENTO ADD CONSTRAINT PK_RECEBIMENTO PRIMARY KEY (RecebimentoID);

CREATE TABLE ENDERECO (
    EnderecoID integer,
    CEP char(8),
    Rua varchar(30),
    Complemento varchar(30),
    Bairro varchar(30),
    Numero varchar(8),
    Cliente integer,
    Municipio integer
);
 
ALTER TABLE ENDERECO ADD CONSTRAINT PK_ENDEREÇO PRIMARY KEY (EnderecoID);

CREATE TABLE USUARIO (
    UsuarioID integer,
    Nome varchar(40),
    Login varchar(12),
    Senha varchar(12),
    Empresa char(14)
);
 
ALTER TABLE USUARIO
DROP COLUMN Role;

ALTER TABLE usuario ALTER COLUMN senha TYPE VARCHAR(12);

ALTER TABLE USUARIO ADD CONSTRAINT PK_USUARIO PRIMARY KEY (UsuarioID);

CREATE TABLE EMPRESA (
    CNPJ char(14),
    Nome_Fantasia varchar(80),
    Razao_Social varchar(80),
    Email varchar(80),
    Telefone varchar(15),
    Usuario integer
);
 
ALTER TABLE EMPRESA ADD CONSTRAINT PK_EMPRESA PRIMARY KEY (CNPJ);

CREATE TABLE MUNICIPIO (
    MunicipioID integer PRIMARY KEY,
    Nome varchar(40),
    UF char(2)
);

CREATE TABLE FORMAPGTO (
    PgtoID integer,
    Descricao varchar(30)
);
 
ALTER TABLE FORMAPGTO ADD CONSTRAINT PK_FORMAPAGTO PRIMARY KEY (PgtoID);

CREATE TABLE MARCA (
    MarcaID integer,
    Descricao varchar(30)
);
 
ALTER TABLE MARCA ADD CONSTRAINT PK_MARCA PRIMARY KEY (MarcaID);

CREATE TABLE OSITEM (
    Servico integer,
    OS integer,
    Usuario integer,
    Data DATE,
    Quantidade NUMERIC(8,2),
    Preco_Unitario NUMERIC(8,2)
);
 
ALTER TABLE OSITEM ADD CONSTRAINT PK_OSITEM PRIMARY KEY (Servico, OS);
 
ALTER TABLE CLIENTE ADD CONSTRAINT FK_CLIENTE_USUARIO
    FOREIGN KEY (Usuario)
    REFERENCES USUARIO (UsuarioID);
 
ALTER TABLE VEICULO ADD CONSTRAINT FK_VEICULO_CLIENTE
    FOREIGN KEY (Cliente)
    REFERENCES CLIENTE (ClienteID);
 
ALTER TABLE VEICULO ADD CONSTRAINT FK_VEICULO_MARCA
    FOREIGN KEY (Marca)
    REFERENCES MARCA (MarcaID);
 
ALTER TABLE OS ADD CONSTRAINT FK_OS_CLIENTE
    FOREIGN KEY (Cliente)
    REFERENCES CLIENTE (ClienteID);
 
ALTER TABLE OS ADD CONSTRAINT FK_OS_VEICULO
    FOREIGN KEY (Veiculo)
    REFERENCES VEICULO (VeiculoID);
 
ALTER TABLE OS ADD CONSTRAINT FK_OS_USUARIO
    FOREIGN KEY (Usuario)
    REFERENCES USUARIO (UsuarioID);
 
ALTER TABLE RECEBIMENTO ADD CONSTRAINT FK_RECEBIMENTO_OS
    FOREIGN KEY (OS)
    REFERENCES OS (OrdemID);
 
ALTER TABLE RECEBIMENTO ADD CONSTRAINT FK_RECEBIMENTO_FORMAPGTO
    FOREIGN KEY (FormaPgto)
    REFERENCES FORMAPGTO (PgtoID);
 
ALTER TABLE RECEBIMENTO ADD CONSTRAINT FK_RECEBIMENTO_USUARIO
    FOREIGN KEY (Usuario)
    REFERENCES USUARIO (UsuarioID);
 
ALTER TABLE ENDERECO ADD CONSTRAINT FK_ENDERECO_CLIENTE
    FOREIGN KEY (Cliente)
    REFERENCES CLIENTE (ClienteID);
 
ALTER TABLE ENDERECO ADD CONSTRAINT FK_ENDERECO_MUNICIPIO
    FOREIGN KEY (Municipio)
    REFERENCES MUNICIPIO (MunicipioID);
 
ALTER TABLE USUARIO ADD CONSTRAINT FK_USUARIO_EMPRESA
    FOREIGN KEY (Empresa)
    REFERENCES EMPRESA (CNPJ);
 
ALTER TABLE EMPRESA ADD CONSTRAINT FK_EMPRESA_RESPONSAVEL
    FOREIGN KEY (Usuario)
    REFERENCES USUARIO (UsuarioID);
 
ALTER TABLE OSITEM ADD CONSTRAINT FK_OSITEM_SERVICO
    FOREIGN KEY (Servico)
    REFERENCES SERVICO (ServicoID)
    ON DELETE NO ACTION;
 
ALTER TABLE OSITEM ADD CONSTRAINT FK_OSITEM_USUARIO
    FOREIGN KEY (Usuario)
    REFERENCES USUARIO (UsuarioID)
    ON DELETE NO ACTION;
 
ALTER TABLE OSITEM ADD CONSTRAINT FK_OSITEM_OS
    FOREIGN KEY (OS)
    REFERENCES OS (OrdemID);

ADICIONAR SEQUENCIAS PARA OS ID DE CADA TABELA
ADICIONAR INDICES PARA NÃO REPETIR DADOS IMPORTANTES (COMO LOGIN) E INDICES PARA MELHORAR DESEMPENHO DA BUSCA DO BANCO